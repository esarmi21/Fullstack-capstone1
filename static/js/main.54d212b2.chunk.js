(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{20:function(e,t,n){e.exports=n(52)},25:function(e,t,n){},26:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(13),r=n.n(o),c=n(19),i=(n(25),n(2)),u=n(3),l=n(5),m=n(4),h=n(6),g=(n(26),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("nav",{className:"Header"},s.a.createElement("h1",null," ","Crossing Vibes")))}}]),t}(a.Component)),p=n(14),d=(n(41),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"video"},s.a.createElement(p.a,{videoId:"6BZuG0erHBY",opts:{height:"400",width:"600",playerVars:{autoplay:1}}}))}},{key:"_onReady",value:function(e){e.target.pauseVideo()}}]),t}(a.Component)),f=(n(42),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("ul",{className:"message-list"},this.props.messages.map((function(e,t){return s.a.createElement("li",{key:t},s.a.createElement("div",null,e))})))}}]),t}(a.Component)),b=(n(43),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"title"},"LOGIN TO CHAT")}}]),t}(a.Component)),j=(n(44),n(7)),v=(n(45),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={message:""},n.handleChange=n.handleChange.bind(Object(j.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(j.a)(n)),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({message:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.sendMessage(this.state.message)}},{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.handleSubmit,className:"send-message-form"},s.a.createElement("input",{onChange:this.handleChange,value:this.state.message,placeholder:"Type your message and hit ENTER",type:"text"}))}}]),t}(a.Component)),O=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"app"},s.a.createElement(b,null),s.a.createElement(f,{messages:this.props.messages}),this.props.isLoggedIn&&s.a.createElement(v,{sendMessage:this.props.sendMessage}))}}]),t}(a.Component),y="http://localhost:8000",E={postLogin:function(e){return fetch("".concat(y,"/auth/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},postUser:function(e){return fetch("".concat(y,"/users"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},postComment:function(e,t){return fetch("".concat(y,"/comments"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:e,text:t})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},getComments:function(){return fetch("".concat(y,"/comments"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},S=(n(46),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={error:null},n.handleSubmit=function(e){e.preventDefault(),n.setState({error:null});var t=e.target,a=t.usernameField,s=t.passwordField;E.postLogin({username:a.value,password:s.value}).then((function(e){n.props.onLoginSuccess(a.value),console.log("success login"),a.value="",s.value=""})).catch((function(e){console.log(e.error),n.setState({error:e.error})}))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"login"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{type:"username",name:"usernameField",placeholder:"username",required:!0}),s.a.createElement("input",{type:"password",name:"passwordField",placeholder:"password",required:!0}),s.a.createElement("button",{className:"submit",type:"submit"},"Login")))}}]),t}(a.Component));S.defaultProps={onLoginSuccess:function(){}};n(47);var w=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={error:null,username:"",password:""},n.handleSubmit=function(e){e.preventDefault();var t=e.target,a=t.username,s=t.password;console.log({username:a,password:s}),console.log(a.value,s.value),n.setState({error:null}),E.postUser({username:a.value,password:s.value}),n.setState({username:"",password:""})},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"register"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{name:"username",placeholder:"username",value:this.state.username,onChange:function(t){e.setState({username:t.value})},required:!0}),s.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(t){e.setState({password:t.value})},required:!0}),s.a.createElement("button",{className:"submit",type:"submit"},"Register")))}}]),t}(a.Component);w.defaultProps={onRegistrationSuccess:function(){}};n(48);var I={login:function(e){localStorage.setItem("loggedIn",e)},logout:function(){localStorage.setItem("loggedIn","")},checkLogIn:function(){return!!localStorage.getItem("loggedIn")},getUsername:function(){return localStorage.getItem("loggedIn")}},k=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={isLoggedIn:I.checkLogIn(),messages:[]},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.getComments().then((function(t){e.setState({messages:t.map((function(e){return e.text}))})}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App__header"},!this.state.isLoggedIn&&s.a.createElement(S,{isLoggedIn:this.state.isLoggedIn,logOut:function(){I.logout(),e.setState({isLoggedIn:!1})},onLoginSuccess:function(t){I.login(t),e.setState({isLoggedIn:!0})}}),this.state.isLoggedIn&&s.a.createElement("button",{isLoggedIn:this.state.isLoggedIn,className:"submit",onClick:function(){I.logout(),e.setState({isLoggedIn:!1})}},"Logout"),!this.state.isLoggedIn&&s.a.createElement(w,null),s.a.createElement(g,null)),s.a.createElement(d,null),s.a.createElement(O,{isLoggedIn:this.state.isLoggedIn,messages:this.state.messages,sendMessage:function(t){E.postComment(I.getUsername(),t).then((function(n){console.log("randomthing",t),e.setState({messages:e.state.messages.concat(t)})})).catch((function(e){return console.log(e)}))}}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(c.a,null,s.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.54d212b2.chunk.js.map